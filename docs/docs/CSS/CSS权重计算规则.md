# CSS 权重计算规则

CSS 选择器（selector）的权重（specificity）决定了对于同一元素，到底哪一条 CSS 规则会生效。且仅有当多条 CSS 规则都对同一元素声明了相应样式时，才会涉及到权重计算的问题。

## 样式类型

1. 行内样式

```html
<span style="color: red;">行内样式</span>
```

2. 内联样式

```html
<style type="text/css">
  span {
    color: yellow;
  }
</style>
```

3. 外联样式

```html
<link rel="stylesheet" href="css/style.css" />
```

## 选择器

正式计算选择器权重之前，先来看选择器是如何被分类的。

CSS 选择器众多，在计算时，这些选择器被归为了三大类，按其权重由大到小依次为：

- ID 选择器：`#app`...
- 类名选择器： `.app`...
- 元素选择器：`div`、`h1`、`h2`、`p`...
- 属性选择器：`[type="text"]`...
- 通用选择器：`*`
- 伪类选择器：`:hover`、`:focus`、`:visited`...
- 伪元素选择器： `::before`、`::after`...
- 子选择器： `>`
- 相邻选择器：`+`
- 后代选择器: <code></code>
- 反选择器：`:not()`
- ...

## 计算规则

1. `!important` 具有最高优先级，它会覆盖页面内任何位置定义的元素样式
2. 行内样式，权值 `1000`
3. ID 选择器，权值 `0100`
4. 类选择器，权值 `0010`
5. 元素选择器，伪元素选择器，权值 `0001`
6. 通配符，子选择器，相邻选择器等权值 `0000`
7. 继承的样式没有权值
8. 元素的最终权值为该元素所使用的选择器的权值之和。例：div#app.app {} 则权值为 0001 + 0100 + 0010 = 0111
9. 无论是行内，内部，外部样式，都是按照以上的权重方式进行比较
10. 通配符，子选择器，相邻选择器，虽然权重为 0000，但是比继承的样式优先
11. 权重最高的样式生效
