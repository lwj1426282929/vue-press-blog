(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{408:function(s,a,t){"use strict";t.r(a);var e=t(5),r=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"npm-发布包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#npm-发布包","aria-hidden":"true"}},[s._v("#")]),s._v(" npm 发布包")]),s._v(" "),t("h2",{attrs:{id:"发布到-npm"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#发布到-npm","aria-hidden":"true"}},[s._v("#")]),s._v(" 发布到 npm")]),s._v(" "),t("p",[t("strong",[s._v("step 1: 准备好 npm 包")])]),s._v(" "),t("p",[s._v("准备好一个项目工程, "),t("code",[s._v("package.json")]),s._v(" 具体参考文档 "),t("a",{attrs:{href:"http://javascript.ruanyifeng.com/nodejs/packagejson.html#toc0",target:"_blank",rel:"noopener noreferrer"}},[s._v("package.json"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("strong",[s._v("step 2: 确保当前镜像是否为 npm 官方镜像")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看当前镜像")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" get registry\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 若不是npm官方镜像则需要设置")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" registry https://registry.npmjs.org/\n")])])]),t("p",[t("strong",[s._v("step 3: 注册用户")])]),s._v(" "),t("p",[s._v("如果之前没有用户， 需要注册， 注册过了的可以直接登录")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加镜像用户， 需要 username 、password 以及 email")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" adduser\n")])])]),t("p",[t("strong",[s._v("step 4: 登录")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" login\n")])])]),t("p",[t("strong",[s._v("step 5: 发布")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 发布")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" publish\n")])])]),t("p",[s._v("发布成功后就可以在 "),t("a",{attrs:{href:"https://www.npmjs.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("npmjs.com"),t("OutboundLink")],1),s._v(" 中查到了， npm 的包名就是 "),t("code",[s._v("package.json")]),s._v(" 中的 "),t("code",[s._v("name")]),s._v(" 值。")]),s._v(" "),t("p",[t("strong",[s._v("step 6: 更新版本")])]),s._v(" "),t("p",[s._v("若 npm 包需要更新， 需要将 "),t("code",[s._v("package.json")]),s._v(" 中的 "),t("code",[s._v("version")]),s._v(" 升级， 然后执行第 5 步即可。")]),s._v(" "),t("p",[t("strong",[s._v("step 7: 撤销发布")])]),s._v(" "),t("p",[s._v("为了不影响其他已经使用了该包的人, npm 官方镜像支持在 2 分钟内删除已发布的包， 2 分钟后不能删除, 只能弃用该包， 即弃用版本及之后版本不再维护，也不能使用， 但是之前的版本不受影响。其他人在安装该包时会有启用警告出现。")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 撤销发布（2分钟内该命令有效）")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" unpublish "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("packageName"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 弃用， 之后版本不能再维护更新， 之前的版本不受影响，并向尝试安装它的所有人提供弃用警告")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" deprecate "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("pkg"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("@"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("version"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("message"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])])]),t("h2",{attrs:{id:"发布到私库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#发布到私库","aria-hidden":"true"}},[s._v("#")]),s._v(" 发布到私库")]),s._v(" "),t("p",[s._v("私库与官方镜像没有区别， 只是将镜像地址换成私库地址而已。为了确保的确使用的是私库地址， 最好在命令后面加上镜像地址 "),t("code",[s._v("--registry url")]),s._v("。")]),s._v(" "),t("p",[t("strong",[s._v("step 1: 准备好 npm 包")])]),s._v(" "),t("p",[t("strong",[s._v("step 2: 确保当前镜像是否为 npm 私库镜像")])]),s._v(" "),t("p",[t("strong",[s._v("step 3: 注册用户")])]),s._v(" "),t("p",[t("a",{attrs:{href:"https://verdaccio.org/zh-CN/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Verdaccio"),t("OutboundLink")],1),s._v(" 只支持命令行方式注册。")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加镜像用户， 需要 username 、password 以及 email")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" adduser --registry "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("url"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])])]),t("p",[t("strong",[s._v("step 4: 登录")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 需要确认username 、password 以及 email")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" login --registry "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("url"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])])]),t("p",[t("strong",[s._v("step 5: 发布")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" publish --registry "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("url"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])])]),t("p",[t("strong",[s._v("step 6: 更新版本")])]),s._v(" "),t("p",[t("strong",[s._v("step 7: 撤销发布")])]),s._v(" "),t("p",[t("a",{attrs:{href:"https://verdaccio.org/zh-CN/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Verdaccio"),t("OutboundLink")],1),s._v(" 没有 2 分钟后不能删除包的限制， 所以我们可以使用 "),t("code",[s._v("npm unpublish pkg --force --registry url")]),s._v(" 来删除已经发布的包， 也可以使用 "),t("code",[s._v("npm deprecate pkg @version message --registry url")]),s._v(" 来弃用包。")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除包")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" unpublish "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("pkg"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --force --registry "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("url"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 弃用包")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" deprecate "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("pkg"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --registry "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("url"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])])])])}),[],!1,null,null,null);a.default=r.exports}}]);