(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{381:function(a,t,r){"use strict";r.r(t);var e=r(5),n=Object(e.a)({},(function(){var a=this,t=a.$createElement,r=a._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[r("h1",{attrs:{id:"npm-私库搭建"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#npm-私库搭建","aria-hidden":"true"}},[a._v("#")]),a._v(" npm 私库搭建")]),a._v(" "),r("div",{staticClass:"custom-block tip"},[r("p",[r("code",[a._v("npm")]),a._v(" 是随同的 "),r("a",{attrs:{href:"http://nodejs.cn/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Node.js"),r("OutboundLink")],1),a._v(" 一起安装的包管理工具，能够解决 "),r("a",{attrs:{href:"http://nodejs.cn/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Node.js"),r("OutboundLink")],1),a._v(" 代码部署上的很多问题，主要应用于以下场景：")]),a._v(" "),r("ol",[r("li",[a._v("允许用户从 npm 服务器下载别人编写的第三方包到本地使用；")]),a._v(" "),r("li",[a._v("允许用户从 npm 服务器下载并安装别人编写的命令行程序到本地使用；")]),a._v(" "),r("li",[a._v("允许用户将自己编写的包或命令行程序上传到 npm 服务器供别人使用。")])]),a._v(" "),r("p",[a._v("在开发过程中，开发人员为了方便代码的迭代与维护，将公共、通用代码抽离出来形成基础组件、插件放至 npm 库供不同项目使用，丰富公司的开发内容，也为整个开发行业贡献自己的力量。但在某些场景中，不宜将组件、插件包放至公共场合。而是通过搭建 npm 私库，将代码放至私有库中，使用 npm 私库主要由以下几点优势：")]),a._v(" "),r("ol",[r("li",[a._v("统一管理，公司内部开发的私有包，统一管理，方便开发和使用；")]),a._v(" "),r("li",[a._v("安全性，由于公司内部开发的模块和一些内容并不希望其他无关人员能够看到，但是又希望内部能方便使用；")]),a._v(" "),r("li",[a._v("加速,自己搭建 npm 服务器，本身可以自带常用 package 的缓存，而 npm 的速度有些感人，自建的服务器会缓存下载过的包，能节省时间。")])])]),a._v(" "),r("h2",{attrs:{id:"sinopia"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#sinopia","aria-hidden":"true"}},[a._v("#")]),a._v(" "),r("a",{attrs:{href:"https://github.com/rlidwka/sinopia",target:"_blank",rel:"noopener noreferrer"}},[a._v("Sinopia"),r("OutboundLink")],1)]),a._v(" "),r("p",[a._v("一个用来做 npm 的 "),r("code",[a._v("registry")]),a._v(" 的私有 + 缓存镜像的开源组件，拥有零配置的本地 npm 注册表。 不必安装和复制整个 CouchDB 数据库。")]),a._v(" "),r("p",[r("a",{attrs:{href:"https://github.com/rlidwka/sinopia",target:"_blank",rel:"noopener noreferrer"}},[a._v("Sinopia"),r("OutboundLink")],1),a._v(" 保留了自己的小型数据库，如果那里不存在包，它会询问 "),r("a",{attrs:{href:"https://npmjs.org",target:"_blank",rel:"noopener noreferrer"}},[a._v("npmjs.org"),r("OutboundLink")],1),a._v("。它只保留你使用的那些包。但是 "),r("a",{attrs:{href:"https://github.com/rlidwka/sinopia",target:"_blank",rel:"noopener noreferrer"}},[a._v("Sinopia"),r("OutboundLink")],1),a._v(" 不能下载以 "),r("code",[a._v("@")]),a._v(" 开头的 npm 包， 并且作者已经不再维护。")]),a._v(" "),r("h2",{attrs:{id:"verdaccio"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#verdaccio","aria-hidden":"true"}},[a._v("#")]),a._v(" "),r("a",{attrs:{href:"https://verdaccio.org/zh-CN/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Verdaccio"),r("OutboundLink")],1)]),a._v(" "),r("p",[r("a",{attrs:{href:"https://verdaccio.org/zh-CN/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Verdaccio"),r("OutboundLink")],1),a._v(" 是 "),r("a",{attrs:{href:"https://github.com/rlidwka/sinopia",target:"_blank",rel:"noopener noreferrer"}},[a._v("Sinopia"),r("OutboundLink")],1),a._v(" 的一种新的 "),r("code",[a._v("web")]),a._v(" "),r("code",[a._v("React")]),a._v(" 端的实现形式，并且目前一直在维护中。 是 "),r("a",{attrs:{href:"https://github.com/rlidwka/sinopia",target:"_blank",rel:"noopener noreferrer"}},[a._v("Sinopia"),r("OutboundLink")],1),a._v(" 的一个分支。")]),a._v(" "),r("h3",{attrs:{id:"verdaccio-安装"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#verdaccio-安装","aria-hidden":"true"}},[a._v("#")]),a._v(" Verdaccio 安装")]),a._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" --global verdaccio\n")])])]),r("p",[a._v("如果在安装过程中报 "),r("code",[a._v("grywarn")]),a._v(" 的权限错的话，那么需要加上 "),r("code",[a._v("--unsafe-perm")]),a._v(" 。")]),a._v(" "),r("p",[r("img",{attrs:{src:"/note/img/verdaccio_install.png",alt:"image"}})]),a._v(" "),r("h3",{attrs:{id:"verdaccio-启动"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#verdaccio-启动","aria-hidden":"true"}},[a._v("#")]),a._v(" Verdaccio 启动")]),a._v(" "),r("p",[a._v("安装完成后，就可以在命令行中 输入 "),r("code",[a._v("verdaccio")]),a._v(" 命令运行。")]),a._v(" "),r("div",{staticClass:"language-sh extra-class"},[r("pre",{pre:!0,attrs:{class:"language-sh"}},[r("code",[a._v("verdaccio\n")])])]),r("p",[r("img",{attrs:{src:"/note/img/verdaccio_start.png",alt:"image"}})]),a._v(" "),r("h3",{attrs:{id:"配置远程访问"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#配置远程访问","aria-hidden":"true"}},[a._v("#")]),a._v(" 配置远程访问")]),a._v(" "),r("p",[r("a",{attrs:{href:"https://verdaccio.org/zh-CN/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Verdaccio"),r("OutboundLink")],1),a._v(" 默认是 "),r("code",[a._v("localhost:4873")]),a._v(" ，只能本地访问， 需要修改配置文件：")]),a._v(" "),r("div",{staticClass:"language-sh extra-class"},[r("pre",{pre:!0,attrs:{class:"language-sh"}},[r("code",[r("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v(" /root/.config/verdaccio/config.yaml\n")])])]),r("p",[a._v("在文件中添加以下内容：")]),a._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[a._v("listen: 0.0.0.0:4873\n")])])]),r("h2",{attrs:{id:"pm2"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#pm2","aria-hidden":"true"}},[a._v("#")]),a._v(" "),r("a",{attrs:{href:"http://pm2.keymetrics.io/",target:"_blank",rel:"noopener noreferrer"}},[a._v("pm2"),r("OutboundLink")],1)]),a._v(" "),r("p",[a._v("verdaccio 命令只能临时启动，远程连接一旦关闭或者结束该命令 verdaccio 进程就会关闭。需要借助进程管理工具进行管理。常见的有 "),r("a",{attrs:{href:"http://pm2.keymetrics.io/",target:"_blank",rel:"noopener noreferrer"}},[a._v("pm2"),r("OutboundLink")],1),a._v("。")]),a._v(" "),r("div",{staticClass:"language-sh extra-class"},[r("pre",{pre:!0,attrs:{class:"language-sh"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 全局安装pm2")]),a._v("\n"),r("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" -g pm2\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 使用pm2启动verdaccio")]),a._v("\npm2 start "),r("span",{pre:!0,attrs:{class:"token function"}},[a._v("which")]),a._v(" verdaccio\n")])])]),r("p",[r("img",{attrs:{src:"/note/img/pm2_install.png",alt:"image"}})]),a._v(" "),r("div",{staticClass:"language-sh extra-class"},[r("pre",{pre:!0,attrs:{class:"language-sh"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 停止verdaccio服务")]),a._v("\npm2 stop "),r("span",{pre:!0,attrs:{class:"token function"}},[a._v("which")]),a._v(" verdaccio\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看进程管理日志")]),a._v("\npm2 show verdaccio\n")])])]),r("h2",{attrs:{id:"nrm"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#nrm","aria-hidden":"true"}},[a._v("#")]),a._v(" "),r("a",{attrs:{href:"https://github.com/Pana/nrm",target:"_blank",rel:"noopener noreferrer"}},[a._v("nrm"),r("OutboundLink")],1)]),a._v(" "),r("p",[r("a",{attrs:{href:"https://github.com/Pana/nrm",target:"_blank",rel:"noopener noreferrer"}},[a._v("nrm"),r("OutboundLink")],1),a._v(" 是一个 npm 源管理器，允许你快速地在 npm 源间切换。")]),a._v(" "),r("div",{staticClass:"language-sh extra-class"},[r("pre",{pre:!0,attrs:{class:"language-sh"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 全局安装nrm")]),a._v("\n"),r("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" -g nrm\n")])])]),r("div",{staticClass:"language-sh extra-class"},[r("pre",{pre:!0,attrs:{class:"language-sh"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 添加镜像别名")]),a._v("\nnrm "),r("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" verdaccio http://154.211.2.124:4873\n")])])]),r("p",[r("img",{attrs:{src:"/note/img/nrm.png",alt:"image"}})]),a._v(" "),r("div",{staticClass:"language-sh extra-class"},[r("pre",{pre:!0,attrs:{class:"language-sh"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 查看全部镜像源")]),a._v("\nnrm "),r("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v("\n")])])]),r("p",[r("img",{attrs:{src:"/note/img/nrm_ls.png",alt:"image"}})]),a._v(" "),r("div",{staticClass:"language-sh extra-class"},[r("pre",{pre:!0,attrs:{class:"language-sh"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 切换镜像")]),a._v("\nnrm use verdaccio\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);